<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asistente Virtual</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

/* Contenido principal de la p치gina */
#contenido {
    padding: 40px;
    max-width: 800px;
    margin: auto;
}

h1 { color: #007bff; }
p { font-size: 18px; margin-bottom: 20px; }

/* Chat flotante */
#chatIcon {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #007bff;
    color: white;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    text-align: center;
    line-height: 60px;
    font-size: 30px;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    z-index: 1000;
}

#chatBox {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 350px;
    max-height: 500px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 10px;
    display: none;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.3);
    z-index: 1000;
}

#chatContent { flex: 1; padding: 10px; overflow-y: auto; }
.message { margin: 5px 0; }
.bot { color: blue; }
.user { color: green; }

#chatInput { display: flex; border-top: 1px solid #ccc; }
#chatInput input { flex: 1; border: none; padding: 10px; outline: none; }
#chatInput button { padding: 10px; border: none; background: #007bff; color: white; cursor: pointer; }
</style>
</head>
<body>

<div id="contenido">
    <h1>Bienvenido a Nuestro Servicio</h1>
    <p>Ac치 pod칠s ver nuestras promociones, novedades y noticias importantes.</p>
    <p>Agreg치 m치s secciones de texto, im치genes o banners promocionales seg칰n necesites.</p>
</div>

<!-- Chat flotante -->
<div id="chatIcon">游눫</div>
<div id="chatBox">
    <div id="chatContent"></div>
    <div id="chatInput">
        <input type="text" id="userInput" placeholder="Escrib칤 tu respuesta aqu칤...">
        <button id="sendBtn">Enviar</button>
    </div>
</div>

<script>
// 츼rbol de conversaci칩n simplificado
const chatTree = {
    "Inicio": {
        mensaje: "춰Hola! Bienvenido al soporte. 쮺칩mo podemos ayudarte hoy?\nOpciones: 1) Problemas con el sistema 2) Consultas sobre servicios 3) Promociones 4) Hablar con un operador",
    },
    "Problemas_sistema": { mensaje: "Vamos a intentar solucionar el problema con el sistema. 쯉e carga la p치gina correctamente?" },
    "Consultas_servicios": { mensaje: "쯈u칠 consulta deseas realizar? 1) Realizar b칰squeda 2) Procesar pago 3) Servicios disponibles por rubro" },
    "Promociones": { mensaje: "Selecciona el tipo de promoci칩n que deseas consultar: 1) Promociones vigentes 2) C칩mo participar en promociones" },
    "Agente_humano": { mensaje: "Te voy a derivar a un operador. Por favor, espera un momento." },
    "Fin": { mensaje: "Por favor, califica tu experiencia del 1 al 5, donde 1 es muy insatisfecho y 5 muy satisfecho." }
};

const sinonimos = {
    "Problemas_sistema": ["sistema", "problema", "error", "fallo", "issue"],
    "Consultas_servicios": ["servicio", "pago", "abonar", "consulta"],
    "Promociones": ["promoci칩n", "oferta", "premio", "sorteo"],
    "Agente_humano": ["operador", "humano", "persona"]
};

let nodoActual = "Inicio";
const chatContent = document.getElementById("chatContent");
const input = document.getElementById("userInput");
const btnEnviar = document.getElementById("sendBtn");

// Mostrar/Ocultar chat
const chatIcon = document.getElementById("chatIcon");
const chatBox = document.getElementById("chatBox");
chatIcon.onclick = () => {
    chatBox.style.display = chatBox.style.display === "flex" ? "none" : "flex";
    chatBox.style.flexDirection = "column";
    input.focus();
};

// Funci칩n para mostrar mensaje
function mostrarMensaje(texto, tipo="bot") {
    const div = document.createElement("div");
    div.className = `message ${tipo}`;
    div.textContent = texto;
    chatContent.appendChild(div);
    chatContent.scrollTop = chatContent.scrollHeight;
}

// Avanzar nodo
function avanzarNodo(nodo) {
    nodoActual = nodo;
    mostrarMensaje(chatTree[nodo].mensaje, "bot");
}

// Procesar mensaje
function procesarMensaje(texto) {
    mostrarMensaje(texto, "user");
    texto = texto.toLowerCase();
    let encontrado = false;
    for (let nodo in sinonimos) {
        for (let palabra of sinonimos[nodo]) {
            if (texto.includes(palabra)) {
                avanzarNodo(nodo);
                encontrado = true;
                break;
            }
        }
        if (encontrado) break;
    }
    if (!encontrado) {
        mostrarMensaje("No entend칤 tu respuesta. Por favor escrib칤 una palabra clave o n칰mero de opci칩n.", "bot");
    }
}

// Inicializar chat
mostrarMensaje(chatTree[nodoActual].mensaje);

// Enviar mensaje
btnEnviar.onclick = () => {
    if (input.value.trim() !== "") {
        procesarMensaje(input.value);
        input.value = "";
    }
};
input.addEventListener("keypress", (e) => {
    if (e.key === "Enter" && input.value.trim() !== "") {
        procesarMensaje(input.value);
        input.value = "";
    }
});
</script>

</body>
</html>

